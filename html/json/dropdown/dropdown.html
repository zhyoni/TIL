<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dropdown</title>
  <link rel="stylesheet" href="../../../lib/reset.css">
  <link rel="stylesheet" href="../dropdown/dropdown.css">
</head>

<body>
  <div class="wrap">
    <div class="contents-wrap">
      <!-- <div class="dropdown-group">
        <button class="dropdown-btn">ğŸ‘‘ Aë“±ê¸‰ 
          <i class="ic"></i>
        </button>
        <ul class="dropdown-box">
          <li class="dropdown-option">ğŸ‘‘ Aë“±ê¸‰  <i class="ic"></i></li>
          <li class="dropdown-option">ğŸ‘‘ Bë“±ê¸‰  <i class="ic"></i></li>
          <li class="dropdown-option">ğŸ‘‘ Cë“±ê¸‰  <i class="ic"></i></li>
          <li class="dropdown-option">ğŸ‘‘ Dë“±ê¸‰  <i class="ic"></i></li>
        </ul>
      </div>
      <dl class="content-box">
        <dt>Aë“±ê¸‰ í‰ê°€ê¸ˆì•¡</dt>
        <dd class="color-primary">10,000ì›</dd>
        <dt>ì•¡ì •</dt>
        <dd>ë¯¸ì„¸í•œ í ì§‘</dd>
        <dt>ë’·íŒ(ì¸¡ë©´)</dt>
        <dd>ë¯¸ì„¸í•œ í ì§‘</dd>
        <dt>ì”ìƒ</dt>
        <dd>ì •ìƒ</dd>
        <dt>ì§€ë¬¸/FACE ID</dt>
        <dd>ì •ìƒ</dd>
      </dl> -->
    </div>
  </div>

  <script src="../../../lib/jquery-3.4.1.min.js"></script>
  <script>
    $(document).ready(function () {

      // let promise = fetch(url, [options])
      // url â€“ ì ‘ê·¼í•˜ê³ ì í•˜ëŠ” URL
      // options â€“ ì„ íƒ ë§¤ê°œë³€ìˆ˜, methodë‚˜ header ë“±ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ
      // optionsì— ì•„ë¬´ê²ƒë„ ë„˜ê¸°ì§€ ì•Šìœ¼ë©´ ìš”ì²­ì€ GET ë©”ì„œë“œë¡œ ì§„í–‰ë˜ì–´ urlë¡œë¶€í„° ì½˜í…ì¸ ê°€ ë‹¤ìš´ë¡œë“œ ë©ë‹ˆë‹¤.
      //   fetch()ë¥¼ í˜¸ì¶œí•˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë³´ë‚´ê³  í”„ë¼ë¯¸ìŠ¤ê°€ ë°˜í™˜ë©ë‹ˆë‹¤.ë°˜í™˜ë˜ëŠ” í”„ë¼ë¯¸ìŠ¤ëŠ” fetch()ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.

      // ì „ì—­ë³€ìˆ˜
      let defaultDevice = 'iphone'; // iphone / android
      let defaultRank = 'A';
      let item = 4;
      fetch('find.json')
        .then(function (respone) {
          return respone.text(); //response.text() : ì‘ë‹µì„ ì½ê³  í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.
        })
        .then(function (data) {
          createList(data);
          changeList(data)
          dropdown()
          // document.getElementsByTagName('dd')[0].textContent = '10,000'

          // var $dd1 = document.querySelector('dd')
          // var $dd2 = document.querySelectorAll('dd')
          // var $dd3 = $('dd')[0]
          var $dd4 = $('dd').eq(0)
          // var $dd = $('dd')
          // console.log(1, $dd1)
          // console.log(2, $dd2)
          // console.log(document.getElementsByTagName('dd')[0])
          // console.log(3, $dd3)
          // console.log(4, $dd4)
          // console.log(5, $dd)

          // // $dd.textContent = '10000'; // X
          $dd4.text('10,000');


        });

      function createList(data) {
        const jsonObj = JSON.parse(data); //jsonë¬¸ìì—´ ê°ì²´ë¡œ ë³€í™˜
        let rank = Object.keys(jsonObj[defaultDevice]);
        let keys = Object.keys(jsonObj[defaultDevice][defaultRank]);
        let values = Object.values(jsonObj[defaultDevice][defaultRank]);

        // console.log('json', jsonObj, '\n rank', rank, '\n keys', keys, 'values', values)

        const contentsWrap = document.querySelector('.contents-wrap');
        const dropdownGroup = document.createElement('div') //.dropdown-group
        const dropdownBtn = document.createElement('button') //.dropdown-btn
        const dropdownUl = document.createElement('ul') //.dropdown-box
        const icon = document.createElement('i') //.ic

        dropdownGroup.className = 'dropdown-group';
        dropdownBtn.className = 'dropdown-btn';
        dropdownUl.className = 'dropdown-box';
        icon.className = 'ic';
        dropdownBtn.textContent = `ğŸ‘‘ ${defaultRank}`;

        for (let i = 0; i < rank.length; i++) {
          const dropdownList = document.createElement('li') //.dropdown-option

          dropdownList.className = 'dropdown-option';
          dropdownList.id = rank[i];
          dropdownList.textContent = `ğŸ‘‘ ${rank[i]}`;
          dropdownUl.appendChild(dropdownList);
        };

        for (let i = 0; i < keys.length; i += item) {
          const $dl = document.createElement('dl') //.content-box
          $dl.className = 'content-box';
          for (let a = i; a < i + item; a++) {
            console.log("a", a)
            let $dt = document.createElement('dt');
            let $dd = document.createElement('dd');
            $dt.textContent = keys[a];
            $dd.textContent = values[a];
            // console.log('1', $dd)
            // console.log("i:", i)
            // console.log('key:', keys[i])
            // console.log('values:', values[i])
            $dl.appendChild($dt)
            $dl.appendChild($dd)
          }
          contentsWrap.appendChild($dl);
        }



        // console.log(keys.length)
        // console.log(rank.length)
        // console.log(values)
        // var $dd1 = $('dd');
        contentsWrap.appendChild(dropdownGroup);
        dropdownGroup.appendChild(dropdownBtn);
        dropdownGroup.appendChild(dropdownUl);
        dropdownGroup.appendChild(icon);
        // console.log(3, $('dd'))
      }

      function changeList(data) {
        const jsonObj = JSON.parse(data); //jsonë¬¸ìì—´ ê°ì²´ë¡œ ë³€í™˜
        $('li').on('click', function (e) {

          let level = e.target.id // ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìš”ì†Œì˜ ì†ì„±
          let changeKeys = Object.keys(jsonObj[defaultDevice][level]);
          let changeValues = Object.values(jsonObj[defaultDevice][level]);

          for (j = 0; j < changeKeys.length; j++) {
            $('dl').find('dt').eq(j).text(changeKeys[j])
            $('dl').find('dd').eq(j).text(changeValues[j])
          }
        });

      }

      function dropdown() {
        $('.dropdown-btn').on('click', function (e) {
          e.stopPropagation();
          $(this).next(".dropdown-box").stop().slideToggle(400);
          $('.ic').addClass('is-active')
        });
        $('.contents-wrap').on('click', function (e) {
          e.stopPropagation();
          $('.dropdown-btn').next(".dropdown-box").stop().slideToggle(400);
          $('.ic').removeClass('is-active')
        });
        $('.dropdown-option').on('click', function () {
          const value = $(this).text();
          $('.dropdown-btn').text(value)
        })
      };

    });
  </script>
</body>

</html>